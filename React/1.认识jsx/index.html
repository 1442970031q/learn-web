<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>è®¤è¯†jsx</title>
    <!-- React -->
    <script src="https://unpkg.com/react@latest/umd/react.development.js"></script>
    <!-- ReactDOM -->
    <script src="https://unpkg.com/react-dom@latest/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- PropTypes é™åˆ¶å‚æ•°ç±»å‹-->
    <script src="https://unpkg.com/prop-types@latest/prop-types.js"></script>
    <style>
    </style>
</head>

<body>
    <div id="example"></div>
    <script type="text/babel">
        const toLearn = ['vue', 'react', 'webpack', 'html']
        const TextCompontent = () => <div>æˆ‘æ˜¯ä¸€ä¸ªç»„ä»¶</div>
        /**
         * jsx ç±»å‹                         react.creatElementè½¬æ¢å                    typeå±æ€§
         * elementå…ƒç´ ç±»å‹                   react elementç±»å‹                           æ ‡ç­¾çš„å­—ç¬¦ä¸² å¦‚div
         * fragmentç±»å‹                     react fragmentç±»å‹                          symbol react.symbolç±»å‹
         * æ–‡æœ¬å­—ç¬¦ä¸²                        ç›´æ¥å­—ç¬¦ä¸²                                             æ—  
         * æ•°ç»„ç±»å‹                          æ•°ç»„ç±»å‹ è¿”å› react.createElement              æ— 
         * ä¸‰å…ƒè¿ç®—ç¬¦                         å…ˆæ‰§è¡Œä¸‰å…ƒè¿ç®—ç¬¦å†æ‰§è¡Œä¸Šè¿°æµç¨‹                    æ— 
         * å‡½æ•°ç±»å‹                            å…ˆæ‰§è¡Œå‡½æ•°å†æŒ‰ç…§ä¸Šè¿°æ‰§è¡Œ                         æ— 
        */

        /**
         * fiber ç±»å‹å’Œ react elementè”ç³»
         * export const FunctionComponent = 0;       // å‡½æ•°ç»„ä»¶
            export const ClassComponent = 1;          // ç±»ç»„ä»¶
            export const IndeterminateComponent = 2;  // åˆå§‹åŒ–çš„æ—¶å€™ä¸çŸ¥é“æ˜¯å‡½æ•°ç»„ä»¶è¿˜æ˜¯ç±»ç»„ä»¶ 
            export const HostRoot = 3;                // Root Fiber å¯ä»¥ç†è§£ä¸ºæ ¹å…ƒç´  ï¼Œ é€šè¿‡reactDom.render()äº§ç”Ÿçš„æ ¹å…ƒç´ 
            export const HostPortal = 4;              // å¯¹åº”  ReactDOM.createPortal äº§ç”Ÿçš„ Portal 
            export const HostComponent = 5;           // dom å…ƒç´  æ¯”å¦‚ <div>
            export const HostText = 6;                // æ–‡æœ¬èŠ‚ç‚¹
            export const Fragment = 7;                // å¯¹åº” <React.Fragment> 
            export const Mode = 8;                    // å¯¹åº” <React.StrictMode>   
            export const ContextConsumer = 9;         // å¯¹åº” <Context.Consumer>
            export const ContextProvider = 10;        // å¯¹åº” <Context.Provider>
            export const ForwardRef = 11;             // å¯¹åº” React.ForwardRef
            export const Profiler = 12;               // å¯¹åº” <Profiler/ >
            export const SuspenseComponent = 13;      // å¯¹åº” <Suspense>
            export const MemoComponent = 14;          // å¯¹åº” React.memo è¿”å›çš„ç»„ä»¶
         * 
        */
        class App extends React.Component {
            state = false
            renderFoot = () => <div>æˆ‘æ˜¯foot ç»„ä»¶</div>
            // åˆ›å»º
            constructor() {
                super()
                console.log('constructor 1')
            }
            // åˆ›å»º
            componentDidMount() {
                console.log('compontentDidMount 4')
            }

            // æ›´æ–°
            // shouldComponentUpdate() {
            //     console.log("shouldComponentUpdate")
            // }

            // æ›´æ–°
            // getSnapshotBeforeUpdate() {
            //     console.log("getSnapshotBeforeUpdate")
            // }

            // æ›´æ–°
            componentDidUpdate() {
                console.log("componentDidUpdate")
            }

            // å¸è½½
            componentWillUnmount() {
                console.log("componentWillUnmount")
            }
            handleClick = () => {
            }
            renderNewJSX = () => {
                const jsx = <div>
                    {/**åŸºæœ¬å…ƒç´ ç±»å‹*/}
                    <div>åŸºæœ¬å…ƒç´ ç±»å‹</div>
                    {/**Fragment*/}
                    <React.Fragment>
                        <div> ğŸ‘½ğŸ‘½ </div>
                    </React.Fragment>
                    {/**æ–‡æœ¬ç±»å‹*/}
                    æˆ‘æ˜¯æ–‡æœ¬ç±»å‹
                    {/**æ•°ç»„ç±»å‹*/}
                    {toLearn.map((v, i) => <div key={i}>{v}</div>)}
                    {/**ç»„ä»¶ç±»å‹*/}
                    <TextCompontent />
                    {/**å‡½æ•°ç±»å‹ */}
                    {this.renderFoot()}
                    {/**ä¸‰å…ƒè¿ç®—ç¬¦*/}
                    {this.state ? <TextCompontent /> : <div>ä¸‰å…ƒè¿ç®—ç¬¦</div>}
                    <button onClick={() => this.setState(v => !v)}>åˆ‡æ¢state</button>
                </div>
                const { children
                } = jsx.props
                const jsxArr = React.Children.toArray(children);//æ‰å¹³åŒ–æ•°ç»„
                const newJSX=[]
                React.Children.forEach(jsxArr,(item)=>{
                    if (React.isValidElement(item)) {
                        newJSX.push(item)
                    }
                })
                console.log('è€çš„',children)
                console.log('æ–°çš„',newJSX)
                const newReactNode=React.createElement('div',{className:"last"},'say good')
                newJSX.push(newReactNode)
                return React.cloneElement(jsx,{},newJSX)
            }
            // åˆ›å»º æ›´æ–°
            render() {
                //å¸¸è§çš„jsxå…ƒç´ 
                return this.renderNewJSX()
            }
        }
        /**
         * æœ€ç»ˆjsxå½¢æˆçš„ fiberå›¾å¦‚ä¸‹
         * 
         *
         
         fiber å¯¹åº”å…³ç³»
            childï¼š ä¸€ä¸ªç”±çˆ¶çº§ fiber æŒ‡å‘å­çº§ fiber çš„æŒ‡é’ˆã€‚
            returnï¼šä¸€ä¸ªå­çº§ fiber æŒ‡å‘çˆ¶çº§ fiber çš„æŒ‡é’ˆã€‚
            sibling: ä¸€ä¸ª fiber æŒ‡å‘ä¸‹ä¸€ä¸ªå…„å¼Ÿ fiber çš„æŒ‡é’ˆã€‚
        */
        ReactDOM.render(
            <App />,
            document.getElementById('example')
        );
    </script>

</body>

</html>